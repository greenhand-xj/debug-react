<html>

<body>
  <script src="../../../build/oss-stable/react/umd/react.development.js"></script>
  <script src="../../../build/oss-stable/react-dom/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.js"></script>
  <div id="container"></div>
  <script type="text/babel">
    // 使用 createRoot的方式
    const root = ReactDOM.createRoot(document.getElementById('container'));
    const { useState, useEffect, useRef } = React;
    // function App() {
    //   const [count, setCount] = useState(0);
    //   console.log('count',count)
    //   useEffect(() => {
    //     const intervalId = setTimeout(function triggerFunction(){
    //       debugger
    //       setCount(prevCount => prevCount + 1);
    //     }, 2000);

    //     return () => clearInterval(intervalId); // 清理定时器
    //   }, []);

    //   return (
    //     <button onClick={() => setCount(count + 1)}>Click me {count}</button>
    //   );
    // }

    // function usePrevValue(value) {
    //   const prev = useRef(null);
    //   useEffect(() => {
    //     prev.current = value;
    //   }, [value]);
    //   return [prev.current];
    // }

    // function App(props) {
    //   const [count, setCount] = useState(0);
    //   console.log(count)
    //   const [prev] = usePrevValue(count);
    //   console.log(prev)
    //   return (
    //     <div className='App'>
    //       <button onClick={() => setCount(count + 1)}>{count}</button>
    //       <button>{prev}</button>
    //     </div>
    //   );
    // }
    function App() {
      const [count, setCount] = useState(1);
      console.log(1);

      useEffect(() => {
        console.log(2);
        return () => {
          console.log(3);
        };
      }, [count]);

      useEffect(() => {
        console.log(4);
        setCount((count) => count + 1);
      }, []);

      return <Child count={count} />;
    }
    function Child({ count }) {
      useEffect(() => {
        console.log(5);
        return () => {
          console.log(6);
        };
      }, [count]);

      return <span>hello world</span>;
    }
    root.render(<App />);
    // root.render(<h1>hello world</h1>);
  </script>
</body>

</html>